# Dating App

Это приложение для знакомств, которое позволяет пользователям зарегистрироваться, просматривать профили других пользователей, обновлять свое местоположение и связываться с другими пользователями, выражая взаимный интерес.

Проект использует environment variables, пример файла: example.env

API запущено здесь https://doubledragon.pythonanywhere.com/.
Уже создано несколько пользователей, два в Астрахани, три в Москве. Рассылка email идёт через gmail smtp

## API эндпоинты

### Регистрация пользователя [/api/clients/create/]

- Метод: `POST`
- Вид запроса: `form-data`
- Тело запроса:
    - `avatar` (image file): Фотография профиля пользователя.
    - `gender` (string): Пол пользователя ('M' для мужского или 'F' для женского).
    - `first_name` (string): Имя пользователя.
    - `last_name` (string): Фамилия пользователя.
    - `email` (string): Адрес электронной почты пользователя.
    - `longitude` (FloatField): Долгота текущего местоположения пользователя (необязательное поле). 
    - `latitude` (FloatField): Широта текущего местоположения пользователя (необязательное поле).
- Ответ:
    - Код состояния: 201 - Создано

Происходит обработка изображения, на него накладывается водяной знак (sample)

### Добавление пользователя в список совпадений [/api/clients/{id}/match/]

- Метод: `POST`
- Права доступа: Аутентифицированный пользователь
- Параметры URL:
    - `id` (integer): Идентификатор пользователя, который должен быть добавлен в список совпадений.
- Тело запроса: Отсутствует
- Ответ:
    - Код состояния: 200 - OK
    - Тело:
        - `message` (string): Сообщение об успешном добавлении пользователя в список совпадений.
  
Если симпатия взаимна, происходит рассылка email обоим участникам.

### Получение списка участников [/api/list/]

- Метод: `GET`
- Права доступа: Аутентифицированный пользователь
- Параметры запроса:
    - `gender` (string, опционально): Фильтрация участников по полу.
    - `first_name` (string, опционально): Фильтрация участников по имени.
    - `last_name` (string, опционально): Фильтрация участников по фамилии.
    - `distance` (string, опционально): Отображение участников в определённом диаметре от пользователя в км.
Пример запроса: /api/list/?gender=M&distance=200 - мужчины в радиусе 200 км.  

- Ответ:
    - Код состояния: 200 - OK
    - Тело: Массив объектов участников, каждый из которых содержит следующие поля:
        - `id` (integer): Идентификатор участника.
        - `avatar` (string): URL аватара участника.
        - `gender` (string): Пол участника.
        - `first_name` (string): Имя участника.
        - `last_name` (string): Фамилия участника.
        - `email` (string): Адрес электронной почты участника.
        - `longitude` (float): Долгота координат текущего местоположения участника.
        - `latitude` (float): Широта координат текущего местоположения участника.

### Обновление местоположения пользователя [/api/location/update/]

- Метод: `PUT`
- Права доступа: Аутентифицированный пользователь
- Тело запроса:
    - `longitude` (float): Новая долгота координат местоположения пользователя.
    - `latitude` (float): Новая широта координат местоположения пользователя.
- Ответ:
    - Код состояния: 200 - OK
    - Тело: Отсутствует

### Аутентификация пользователя

Приложение использует аутентификацию на основе токенов.

#### Получение аутентификационного токена [/api/auth/login/]

- Метод: `POST`
- Права доступа: Любой пользователь (аутентификация не требуется)
- Тело запроса:
    - `username` (string): Имя пользователя.
    - `password` (string): Пароль пользователя.
- Ответ:
    - Код состояния: 200 - OK
    - Тело:
        - `token` (string): Аутентификационный токен для пользователя.
